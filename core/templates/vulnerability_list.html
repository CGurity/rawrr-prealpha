{% load markdown_filter %}
<table class="table table-striped">
  <thead>
    <tr>
      <th>#</th>
      <th>Vulnerability</th>
      <th>Description</th>
      <th>Assessment activity</th>
      <th>Other Information</th>
      <th>Max risk level</th>
      <th>Threats Associated</th>
    </tr>
  </thead>
  <tbody>
    {% for vulnerability in vulnerability_list %}
      <tr>
        <td>
          <div class="btn-group" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-{% if not vulnerability.threats_associated.all %}danger{% else %}warning{% endif %}" data-toggle="modal" data-target="#createUpdateModal" data-model="vulnerability" data-item="{{ vulnerability.number }}" data-title="{{ vulnerability.title }}" data-description="{{ vulnerability.description }}" data-references="{{ vulnerability.references }}" data-other-info="{{ vulnerability.other_info }}" data-threats-associated="{% for threat in vulnerability.threats_associated.all %}{{ threat.number }},{% endfor %}">V{{ vulnerability.number }}</button>
          </div>
        </td>
        <td>{{ vulnerability.title }}</td>
        <td>{{ vulnerability.description|truncatechars:100|markdown_filter|safe }}</td>
        <td>{{ vulnerability.assessment }}</td>
        <td>{{ vulnerability.other_info|truncatechars:100|markdown_filter|safe }}</td>
        <td>{{ vulnerability.max_risk_level }}</td>
        <td>{% for threat in vulnerability.threats_associated.all %}
<button type="button" class="btn btn-{{ threat.security_field.color }}" id="deleteModalSubmit" onClick="someFunction({{ threat.number }});">T{{ threat.number }}</button>
{% endfor %}</td>
      </tr>
    {% endfor %}

  </tbody>
</table>
